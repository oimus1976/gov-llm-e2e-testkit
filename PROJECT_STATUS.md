# 📘 PROJECT_STATUS v0.7.27

**— F9（評価可能データ安定提供フェーズ）完結宣言版 —**

**Last Updated:** 2026-01-10  
**Maintainer:** Sumio Nishioka & ChatGPT (Architect Role)

---

## 0. フェーズ定義の統一（不変）

本プロジェクトのフェーズ定義は、  
**Roadmap を唯一の正本**として以下に統一する。

| フェーズ | 内容 |
| -------- | ---- |
| F1 | 設計フェーズ |
| F2 | Page Object 実装フェーズ |
| F3 | Answer Detection & テスト基盤構築フェーズ |
| F4 | RAG 入力差分影響の観測・試験データ提供フェーズ |
| F5 | CI（e2e.yml）整備フェーズ |
| F6 | LGWAN 対応フェーズ（保留） |
| F7-A | 運用準備フェーズ |
| F7-B | 制御付き実運用試行フェーズ |
| F7-C | 拡張試行フェーズ |
| **F8** | **Markdown変換検証フェーズ** |
| **F9** | **評価可能データ安定提供フェーズ** |
| **F10+** | **評価・配布・拡張検討フェーズ（着手）** |

※ F7 は A / B / C の段階構造を持つ。

---

## 1. Current Phase（現在地）

### **F9：評価可能データ安定提供フェーズ（完了）**

F9 は、以下の目的をもって開始された。

- 回答内容の正誤・品質・有用性を評価しない
- UI が返す回答を意味付けせずに観測・抽出・保存する
- 実行条件差分によって評価可能データが破壊されないことを保証する
- 後続フェーズが意味を持たずに追従可能な成果物 I/F を確定する

PROJECT_STATUS Backlog に基づく事実確認の結果、  
**F9 の必須要件はすべて達成されている**ため、  
本フェーズは **v0.7.26 をもって完結**とする。

※ 完結判断の正本：`docs/spec/Done_F9.md`

---

## 2. フェーズ別到達点（要約）

### F8：Markdown変換検証フェーズ（完了）

- HTML→Markdown 変換を前提とした回答収集の技術的検証が完了
- answer.md（Raw / Extracted / Metadata）の生成成立を確認
- 非評価モデルを維持したまま観測データを確保
- F9 に引き渡し可能な素材を確立

---

### F9：評価可能データ安定提供フェーズ（完了）

#### F9-A：質問セット・条例バインディング

- 抽象質問テンプレ運用モデル確立
- 条・項の自動／非自動解決フロー確定
- 一般職員向け README / FAQ による配布・実行 UX 確定
- **運用成立を確認**

#### F9-B：実行条件固定・ナレッジ切替

- 実行条件をアカウント差分に集約
- `.env` 切替方式を正式仕様として確定
- 再投入方式を禁止

#### F9-C：Extracted 正本化

- DOM スコープ規則確定
- Extracted を評価入力の正本と定義
- VALID / INVALID の状態判定を仕様化

#### F9-D：下流フェーズ整合

- Raw / answer.md / dataset I/F 最終確定
- dataset.yaml v0.2 を実体生成
- コピー完全性を実証

---

## 3. 補足更新（F9 完結後・運用基盤整備）

### 初期化手順の整備（v0.7.27 追加）

F9 完結後、以下の **運用上の前提条件整備**を追加した。

- 新端末で `.env` 不在時に pytest が完走しない事象を確認
- `.env` を正本とした初期化手順を明文化
- 冪等な初期化スクリプト `scripts/bootstrap_env.py` を追加
  - `.env` が存在する場合は何もしない
  - 存在しない場合のみ既知テンプレートから生成
  - ダミー値／未設定項目は人間に入力を促す

本対応は **F9 成果物の意味・I/F・評価方針を一切変更しない**。

---

## 4. 完了宣言（Decision）

以下を正式に宣言する。

- **F9 は目的を達成し、完結した**
- 評価可能データは、安定して生成・保存・引き渡し可能な状態にある
- 初期化手順整備は F9 の再定義ではなく、F10 準備の一環である

---

## 5. Backlog（F10）（更新）

### 完了（F9 の必須要件）

- A：質問具体化・条例参照の一意化
- B：実行条件固定・ナレッジ切替
- C：Extracted 正本化
- D：Raw の位置づけ整理
- E：UI ノイズ対策
- F：成果物インターフェース確定
- I：dataset 構築・検証

→ **すべてクローズ**

---

### F10 以降に送致（Deferred）

以下は F9 の完了条件には含めず、  
**次フェーズ（F10+）で改めて検討する。**

- G：answer.md の version（semver）定義
- H：archive 運用の明文化
- J：CLI / entrypoint 設計
- frontmatter テンプレ差分整理

---

## 6. 評価・判断に関する前提（不変）

本プロジェクトでは以下を扱わない。

- 回答内容の正誤・品質・有用性の評価
- HTML / Markdown の優劣判断
- 品質スコアリング・ランキング

---

## 7. ナレッジ形式と本プロジェクトの責務境界（不変）

本プロジェクトは、**ナレッジベースに格納される原データ形式
（HTML / Markdown）の妥当性・優劣を判断しない**。

### 7.1 責務の切り分け（不変）

- **ナレッジ形式（HTML / Markdown）の設計・変換・妥当性評価**
  - 例規 HTML 変換プロジェクトの専管事項とする
- **本プロジェクト（Qommons.AI テスト自動化）**
  - ナレッジ形式を入力条件の一つとして受け入れる
  - UI が返す回答（HTML）を、
    設計どおりに観測・抽出・保存できるかのみを検証対象とする

### 7.2 本プロジェクトにおける「評価」の定義

本プロジェクトにおける評価とは、
**回答内容の正誤・品質・表現の適切性を判定することではない**。

評価対象は以下に限定される。

- submit → probe → DOM 抽出 → answer.md 生成が成立するか
- probe 例外が execution flow を破壊しないか
- DOM 構造差分や UI ノイズが存在しても、
  観測事実と証跡が失われないか
- Extracted が VALID / INVALID として一意に状態判定されるか

### 7.3 HTML / Markdown ナレッジの扱い方針

- HTML / Markdown は **比較・観測条件の一つ**として扱う
- どちらが「正しい」「望ましい」かは、
  本プロジェクトでは結論づけない
- ナレッジ形式差分によって観測された挙動は、
  **一次情報として記録し、後続プロジェクトに引き渡す**

本方針は、F8 / F9 を通じて一貫して適用される。

---

## 8. Backlog 記述ルール（不変）

本プロジェクトにおける Backlog は、
**未解決の状態ではなく、解決するための作業単位**を記述する。

- 状態記述（「〜されていない」等）は禁止
- 文末は完了判定可能な動詞で記述する  
  （定義する／確定する／仕様化する／是正する／明文化する）
- 本ルールは **全フェーズ共通の拘束条件**とする

---

## 9. Backlog（F10）（更新）

**目的**
ゴールデン質問・ゴールデン条例を用い、
例規HTML変換プロジェクトへ引き渡す
**評価可能な answer.md 本番セット**を生成・確定する。

### Backlog（案）

- [ ] ゴールデン質問セットを **本番生成用として凍結宣言**する
- [ ] ゴールデン条例（HTML / Markdown）の **投入条件と識別方法を明文化**する
- [ ] 本番 run の **実行条件（環境・アカウント・手順）を固定**する
- [ ] ゴールデン質問 × ゴールデン条例による **answer.md を全件生成**する
- [ ] 生成された answer.md 一式を **引き渡し用成果物として束ねる**
- [ ] 本成果物が **評価判断を含まない入力データであることを明記**する

**完了条件（判定基準）**

- 第三者がそのまま評価入力として利用できる answer.md 一式が存在する
- 本プロジェクト側での再解釈・評価・加工を行っていないことが説明できる

---

## F10-B：リポジトリ全体の最適化（構造・責務整理）

**目的**
F9 完結後の現状に合わせ、
リポジトリ構造と責務配置を **説明可能な状態に整理**する。

### Backlog（案）

- [ ] run/ ディレクトリの責務を **F10 時点の位置づけとして再定義**する
- [ ] scripts/ 配下のファイルを **正式資産／暫定資産／廃棄候補に仕分け**する
- [ ] 一時的・検証用コードを **正式資産と明確に分離**する
- [ ] ディレクトリ構造が **Roadmap / PROJECT_STATUS の責務と一致していることを確認**する
- [ ] 不要な重複・死蔵ファイルを **履歴を残した上で整理**する

**完了条件**

- 「このリポジトリには何があり、何のために存在するか」を説明できる
- F9 成果物の意味・I/F が一切変わっていない

---

## F10-C：ドキュメント整理・統合（入口と正本の明確化）

**目的**
ドキュメント体系を整理し、
**第三者が迷わず F9 成果を理解できる状態**を作る。

### Backlog（案）

- [ ] README 系ドキュメントの **役割分担（入口／手引き／仕様）を整理**する
- [ ] Spec / Design / HowTo の **正本・補助文書の関係を明示**する
- [ ] 重複・分散している説明を **統合または参照関係に整理**する
- [ ] F9 完結および F10 開始の **文脈が文書上で追える状態にする**
- [ ] 「本プロジェクトがやらないこと」を **明示的に残す**

**完了条件**

- 初見の利用者が README から F9 成果の位置づけを理解できる
- 設計判断の正本がどれか一目で分かる

---

## F10-D：積み残し Backlog の再評価と消化

**目的**
F9 から Deferred された項目について、
**必要性を再判断した上で処理する**。

### Backlog（案）

- [ ] answer.md の version（semver）付与要否を **再評価し結論を出す**
- [ ] archive 運用（旧版退避ルール）を **必要十分な形で定義する**
- [ ] CLI / entrypoint 設計の **実施可否を判断する**
- [ ] frontmatter テンプレ差分の扱いを **設計判断として確定する**
- [ ] 不要と判断した項目を **明示的に Backlog からクローズ**する

**完了条件**

- Deferred 項目が「未整理」ではなく
  **やる／やらない／後続に送るの判断済み状態**になる

---

## 補足（重要）

- **F10-A が唯一の“成果物生成フェーズ”**
- F10-B/C/D はすべて
  👉 *F10-A を安全に成立させるための整理フェーズ*
- 同時並行はせず、**A → B/C → D** の順が安全

---

## 10. Next Action（更新）

- F10-Aから順次着手

---

## 11. 注記（不変）

- 本 STATUS は **現在地の唯一の正本**
- Done 定義・CHANGELOG と整合していることをもって有効とする
- F9 完了後に新たな要件が発生した場合は、F10+ として扱う

---
