# 📘 PROJECT_STATUS v0.6.4 — F4 v0.2 試験データ提供マイルストーン明確化

**Last Updated:** 2025-12-17
**Maintainer:** Sumio Nishioka & ChatGPT (Architect Role)

---

## 0. フェーズ定義の統一について（再掲・不変）

本プロジェクトのフェーズ定義は、
**Roadmap v1.2 を唯一の正本**として以下に統一する。

| 区分 | 内容 |
| -- | -- |
| F1 | 設計フェーズ |
| F2 | Page Object 実装フェーズ |
| F3 | Answer Detection & テスト基盤構築フェーズ |
| F4 | RAG 入力差分影響の観測・試験データ提供フェーズ |
| F5 | CI（e2e.yml）整備フェーズ |
| F6 | LGWAN 対応フェーズ（保留） |
| F7 | 運用・保守フェーズ |

※ Phase A / B / C 等の別系統呼称は使用しない。

---

## 1. プロジェクトの現在地（要約）

本プロジェクトは現在、

> **「RAG 前処理の是非を判断する」段階ではなく、
> 「判断に利用可能な試験データ（試金石）を
> 誤解なく提供する」段階**

にある。

F1–F3 で構築された E2E 基盤は完全に凍結され、
F4 では **入力差分の影響を再現可能に観測・記録すること**が
最優先事項となる。

---

## 2. 完了事項（再確認）

### ✅ F1–F3：E2E 基盤フェーズ（完全完了・凍結）

以下は **基盤として完成・変更禁止（freeze）** 状態である。

#### 設計・構造

- Design_playwright_v0.1
- Locator_Guide_v0.2
- Debugging_Principles_v0.2
- PROJECT_GRAND_RULES v4.2

#### 実装

- Environment Layer（env_loader v0.2.3）
- Page Object（Base / Login / Chat）
- ChatPage.submit v0.6
  - UI送信責務のみに限定
  - submit_id / SubmitReceipt 意味論確定

#### Answer Detection

- probe v0.2.1（GraphQL / REST 両対応）
- submit–probe 相関設計 v0.2
- pytest-facing Answer Detection API v0.1r
  - page を受け取る低レベル API 境界を正式採用

#### CI / 可視化

- CI Correlation Summary Presentation Semantics v0.1
- GitHub Actions summary による日本語相関サマリー
- WARN / INFO を FAIL と誤認しない意味論を保証

👉 **E2E 基盤としての完成条件をすべて満たしている**

---

## 3. F4 事前検証（完了）

### ✅ 部署境界プローブ（Design_rag_f4_dept_boundary_probe_v0.1）

- ナレッジ境界が「部署／アカウント単位」で分離されていることを事前検証
- F4 本体において、HTML / Markdown の差分が
  **他ナレッジの混入によって歪まない**ことを確認

---

## 4. Current Phase（現在のフェーズ）

### ▶ F4：RAG 入力差分影響の観測・試験データ提供フェーズ

本フェーズでは **E2E 基盤を変更しない**。
目的は、HTML / Markdown 等の入力差分が
**RAG 応答に与える影響を再現可能に観測・記録すること**である。

---

### 4.1 F4 v0.1（完了）

- RAG 評価基準 v0.1 を用いた差分評価が
  技術的・運用的に成立することを確認
- 手動運用下でも評価結果を再現可能であることを保証

👉 **試験基盤の成立確認**

---

### 4.2 F4 v0.2（完了／最初の完了マイルストーン）

**F4 v0.2 の位置づけ：**

> **F4 フェーズのゴールを満たす
> 最初の完了マイルストーンとして、
> 試験結果を構造化し、
> 他プロジェクトが判断材料として
> 直接利用可能な試金石データを提供する。**

本マイルストーンでは、

- ケース横断での評価結果集約
- 差分傾向が把握可能な形式への整理
- 判断主体（例：例規HTML変換プロジェクト）への
  データ提供可能性の確保

を到達条件とする。

※ 採用／不採用の判断そのものは
  **本プロジェクトの責務外**とする。

  #### 完了根拠（F4 v0.2）

- 試金石データ構造（Raw / Context / Summary）を設計として確定
- JSON Schema Draft 2020-12 によるバリデーションを実施し、
  構造的妥当性を一次情報として確認
- 検証専用公式サンプルを整備し、
  第三者が再現・検証可能な形で提供可能とした
- manifest / README により、
  データセットの位置づけ・責務・非対象事項を明文化


---

## 5. F4 運用ルール


### 📌 F4 運用ルール v0.1.5 を正式採用

以下を **F4 フェーズにおける固定ルール**として確定した。

#### ナレッジ構成

- HTML 用／Markdown 用ナレッジは **別テストアカウントで管理**
- 同一アカウント内での
  - ナレッジ削除
  - ナレッジ再投入
  は **v0.1 では行わない**

#### Case 運用

- F4 は **最小 3 ケース（Case1–3）**のみで評価
- Case 間でナレッジの差し替えは行わない
- 質問文は **条例IDを必ず含める**ことで一意化する

#### 実行プロファイル

- `profile` は **記録・識別用メタデータ**
- `--f4-profile` は評価結果ログ識別のために使用
- chat / アカウント / ナレッジの切替は **完全手動**

#### ログ運用

- 結果ログは以下を必須要素とする：
  - case_id
  - profile
  - timestamp
- HTML / Markdown の結果は **別ファイルとして保存**

---

## 6. Out of Scope（F4 では扱わない）

- RAG 前処理方式の採否判断
- chat / ナレッジの自動切替
- ナレッジの自動アップロード・削除
- CI への統合
- 意味的同義語・高度な意味理解評価

---

## 7. リスク・注意点（継続認識）

- LLM 応答の非決定性
- 手動運用に起因する人為ミス
- ナレッジ更新タイミングの差異

→ これらは **基盤問題ではなく評価フェーズの制約**として扱う。

---

## 8. 総括

本プロジェクトは現在、

> **「評価を誤解なく実施できる基盤」を前提に、
> 判断に利用可能な
> 試験データを提供する段階**

に到達している。

F4 v0.2 は、
**本フェーズにおける最初の完了マイルストーン**として、
試金石データ提供を目的とする。

---

### Next Action（単一・明確）

- **F4 フェーズ完了後の次フェーズ（F5 または拡張検討）を判断する**
