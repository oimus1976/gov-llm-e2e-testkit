# 📘 PROJECT_STATUS v0.6.6

**— F5（CI 整備フェーズ）最小 CI 実装完了の明文化**

**Last Updated:** 2025-12-18
**Maintainer:** Sumio Nishioka & ChatGPT (Architect Role)

---

## 0. フェーズ定義の統一（不変）

本プロジェクトのフェーズ定義は、
**Roadmap v1.2 を唯一の正本**として以下に統一する。

| フェーズ   | 内容                             |
| ------ | ------------------------------ |
| F1     | 設計フェーズ                         |
| F2     | Page Object 実装フェーズ             |
| F3     | Answer Detection & テスト基盤構築フェーズ |
| F4     | RAG 入力差分影響の観測・試験データ提供フェーズ      |
| **F5** | **CI（e2e.yml）整備フェーズ**          |
| F6     | LGWAN 対応フェーズ（保留）               |
| F7     | 運用・保守フェーズ                      |

※ Phase A / B / C 等の暫定呼称は使用しない。

---

## 1. プロジェクトの現在地（要約）

本プロジェクトは現在、

> **「再現可能な E2E テスト基盤（F1–F3）」と
> 「判断材料として利用可能な試金石データ（F4）」が確立された状態で、
> それらを破壊しない最小 CI を実装・固定した段階**

に到達している。

本フェーズ（F5）の目的は、
**品質評価を自動化することではなく、
基盤破壊を即時検知するための CI を成立させること**である。

---

## 2. 完了事項（再確認）

### ✅ F1–F3：E2E 基盤フェーズ（完全完了・Freeze）

（※ 内容は v0.6.5 から変更なし）

👉 **E2E テスト基盤として完成・凍結済み**

---

## 3. F4 フェーズの到達点（確定）

### ✅ F4 v0.2：試金石データ提供マイルストーン（完了）

（※ 内容は v0.6.5 から変更なし）

👉 **F4 は CI 対象ではない（意図的）**

---

## 4. Current Phase（現在のフェーズ）

### ▶ **F5：CI（e2e.yml）整備フェーズ**

本フェーズは、

> **最小 CI を実装し、
> 「基盤が壊れていないこと」を GitHub Actions 上で
> 継続的に検証できる状態を成立させたフェーズ**

として位置づけられる。

---

## 5. F5 の目的とスコープ（固定）

### 5.1 目的（What）

* 基盤破壊（UI 変更・submit/probe 崩壊）を即時検知する
* CI 実行結果を
  **「基盤が生きているかどうか」だけに還元できる**
* pytest exit code 5（テスト件数 0）を恒久的に回避する

---

### 5.2 CI 対象（In Scope）

| テスト種別      | CI 対象 |
| ---------- | ----- |
| Smoke Test | ✅     |

※ Basic RAG Test は test_plan 上は定義されているが、
**F5 の CI 実行対象には含めていない**（意図的）。

---

### 5.3 CI 非対象（Out of Scope・意図的）

以下は **設計判断として CI に含めない**。

| 項目                   | 理由              |
| -------------------- | --------------- |
| F4（RAG 評価・試金石データ）    | 手動前提・非決定性・責務外   |
| Basic / Advanced RAG | PASS/FAIL に還元不可 |
| LGWAN 実行             | 環境未提供（Blocked）  |

👉 「未実装」ではなく **「CI に入れないと決めている」**。

---

## 6. F5 実装完了条件（満たされた項目）

以下は **F5 の完了条件として定義され、すべて満たされた**。

* `.github/workflows/e2e.yml` が main ブランチに存在する
* CI は **単一 job / 単一 pytest 実行**で構成されている
* 冒頭コメントにより
  **「最小 CI」「基盤の破壊」の定義が明文化**されている
* `matrix` 等の可変構成を持たず、
  **再現性のある CI として固定されている**
* probe 観測不能時は
  **基盤破壊として明示的に FAIL** する
* CI 失敗時に
  **調査可能な artifacts（logs）が保存される**

---

## 7. 既知の制約・リスク（継続認識）

* LLM 応答の非決定性
* UI 変更によるロケータ破壊
* 外部サービス起因の一時失敗

→ これらは **F5 の目的外**であり、
CI 失敗＝品質失敗 と誤解しない設計を維持する。

### 7.1 F7（運用・保守フェーズ）における RAG Entry CI の位置づけ

F7 フェーズでは、
RAG QA（評価・考察）そのものを CI に組み込むことは行わない。

代わりに、本プロジェクトは
**RAG QA に進む前提条件を検証する「入口専用 CI」**
として、以下を正式に採用する。

- **Design_ci_rag_entry_v0.1**
  - F5 基盤 CI（e2e.yml）を前提条件として再利用
  - RAG QA 実行に必要な
    - 基盤成立性
    - 入力条件の妥当性
    - Golden 資産の誤消費防止
    を機械的に検証する
  - RAG 回答の品質・優劣・妥当性は判断しない

本 CI における FAIL は、
**「RAG QA 入口が成立していない」ことのみを意味する**。

この設計により、
- F5（基盤 CI）の凍結状態を維持しつつ
- F4（試金石データ提供）の責務を侵害せず
- F7（運用・保守）における安全な実行境界

を明確に分離した状態で保持する。

---

## 8. 次フェーズへの遷移条件（予告）

* F5 の基盤確認 CI は **今後変更しない**
* RAG QA を CI に含める場合は
  **別設計・別フェーズ（Phase B / F7 以降）**として扱う


---

