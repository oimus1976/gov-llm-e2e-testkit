---
date: 2025-12-24
source: vscode-chat
context: F8 v0.2 observation logging
related:
- run_f8_set1.py
---
【VS CODE 作業要約】

1.実施したこと（事実）

- AnswerTimeoutError / AnswerNotAvailableError を捕捉した際に質問ディレクトリへ timeout_dom.html / timeout_page_content.html および no_answer_dom_snippet.html / no_answer_page_content.html をベストエフォート保存する補助関数を追加 (run_f8_set1.py)。
- run_f8_set1 ループで質問ディレクトリを事前作成し、観測保存後に同一例外を再送出する形で TIMEOUT/NO_ANSWER のみログを付与（既存の break-on-error 挙動は維持）(run_f8_set1.py)。

2.観測された問題／なかった問題

- 問題なし: 18問実行フロー・Markdown 出力・判定ロジックに変更なし (run_f8_set1.py)。
- 未実施: 自動テストや実行検証は未実施（コード追加のみ）。

3.判断した点（理由つき）

- taxonomy や判定条件に影響させないため、TIMEOUT/NO_ANSWER のみに限定し、観測保存後は例外をそのまま再送出する方針とした。
- page 無効時に runner を止めないため、page.is_closed() チェックと try/except で観測処理を全てベストエフォート化した。
- 保存内容は DOM スナップショットと page.content() のみに絞り、ブリーフ記載の例示に沿った最小ファイル名とした。

4.判断を保留した点

- probe_v0.2 の jsonl/summary（run_graphql_probe 出力）を質問ディレクトリへ寄せるかは未対応（wait_for_answer_text が出力先を受け取らないため現状維持）。
- NO_ANSWER 時の DOM 粒度（特定コンテナ選択や別形式保存）は documentElement/page.content のみに留め、追加粒度の要否は未判断。

5.次に Web版で裁定してほしい論点

- probe ログ保存先を質問ディレクトリへ統一するために wait_for_answer_text / run_graphql_probe へ出力先指定を追加するか。
- NO_ANSWER/TIMEOUT 観測ファイル名・保存粒度（HTMLのみで十分か、スクリーンショット等を追加するか）を固定とするか。
