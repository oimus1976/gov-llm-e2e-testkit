# test_plan_v0.1.1

gov-llm-e2e-testkit — E2E テスト体系 最上位仕様書  
バージョン: v0.1.1  
最終更新: 2025-12-13

---

## 0. この文書の位置づけ（重要）

本書 `test_plan_v0.1.1.md` は、  
gov-llm-e2e-testkit における **E2E テスト体系の最上位仕様・思想定義書**である。

本書の目的は以下に限定される：

- E2E テスト体系の全体構造（層構造・優先順位）の定義
- 各テストレイヤの目的と役割の明確化
- CI / QA / 手動実行における基本的な依存関係の規定

本書は **個別テストの実行仕様書ではない**。

具体的な検証条件・合否基準・検知方式・実装詳細は、  
各 Test Plan（例：Test_plan_probe_v0.2.2.md）および設計書に委譲される。

---

## 1. テスト体系の全体構造

本プロジェクトの E2E テストは、以下の 3 層構造で構成される。

1. **Smoke Test**
2. **Basic RAG Test**
3. **Advanced RAG Test**

この順序は **固定**であり、  
下位テストは上位テストの成功を前提とする。

---

## 2. 各テストレイヤの目的

### 2.1 Smoke Test

目的：
- システムが起動し、最低限の QA が 1 件でも成立することを確認する

特徴：
- 実行時間最優先
- 精度評価は行わない
- 失敗した場合、以降のテストは実行しない

---

### 2.2 Basic RAG Test

目的：
- 条例ナレッジに対する **基本的な QA 精度** を検証する

特徴：
- 少数・代表的な質問セットを用いる
- YAML により質問データを定義する
- 評価ロジック・検知方式は本書では規定しない

- 詳細なテスト要件・合否判定ルールは
  docs/test_plan/basic_rag_v0.1.md にて定義する

---

### 2.3 Advanced RAG Test

目的：
- 境界条件・長文・複合条件など、  
  **実運用を想定した高度な QA ケース**を検証する

特徴：
- 実行時間は長くなることを許容
- モデル更新・UI 変動時の影響検知に重点を置く
- 詳細な合否判定は各 Test Plan に委譲する

- 詳細なテスト要件は
  docs/test_plan/advanced_rag_v0.1.md にて定義する

---

## 3. YAML テストデータの扱い（概要）

本書は、YAML テストデータについて以下のみを規定する：

- テストデータは **コードから分離**して管理する
- Basic / Advanced で用途を分ける
- YAML の **構造レベル**（項目の意味・粒度）を統一する

具体的なスキーマ定義・評価方法・差分比較方法は、  
対応する設計書および Test Plan に委譲される。

---

## 4. CI / 手動実行との関係

- CI（GitHub Actions）は INTERNET 環境のみを対象とする
- LGWAN 環境での実行は手動実行を前提とする
- CI における実行順序は本書のテスト体系に準拠する

CI の具体的な構成・実装は  
`Design_ci_e2e_v0.1.md` にて定義される。

---

## 5. 他 Test Plan との関係

本書は、以下の Test Plan 群の **上位文書（思想・体系レベル）**として機能する。

- Test_plan_probe_v0.2.2.md  
  （Answer Detection Layer の正式 QA 仕様）

各 Test Plan は、本書で定義された  
テスト体系・優先順位・責務分離に準拠して設計・運用される。

---

## 6. 更新ポリシー

- 本書は頻繁に更新しない
- テスト体系そのものが変わる場合のみ更新する
- 個別テスト仕様の変更では更新しない

---

以上をもって  
**test_plan_v0.1.1 — gov-llm-e2e-testkit E2E テスト体系 最上位仕様書**  
とする。
