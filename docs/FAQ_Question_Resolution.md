# FAQ（よくある質問・トラブル対応）

本書は、
「質問具体化ツール」を利用する中で、
一般ユーザー（職員・評価者）が
戸惑いやすい点や、つまずきやすいケースについて、
その意味と対処方法をまとめたものです。

README を一通り読んだうえで、
「想定と違う結果になった」
「うまく動いていない気がする」
と感じた場合に参照してください。

---

## 自動解決されない質問がある

### どんな状況？

一部の質問で、条・項が自動的に確定せず、
実行中にユーザー入力が求められます。

### どう考えればいい？

これは **異常ではありません**。

条例の構造によっては、
複数の条や項が候補として考えられる場合があります。
そのようなケースでは、
ツールが推測で判断せず、
ユーザーの判断を求める設計になっています。

### どう対応すればいい？

- 条例本文を確認し、適切な条・項を指定してください
- 入力した内容が、そのまま最終結果として採用されます

---

## 条例 HTML が不足している／見つからないと表示される

### どんな状況？

実行時に、
「条例 HTML が見つからない」
といったエラーが表示されます。

### 主な原因

- `reiki_honbun/` 配下に、対象となる条例の HTML が存在しない
- HTML ファイル名が、条例 ID と一致していない

### どう対応すればいい？

- ファイルの配置場所と命名規則を確認してください
- 対象とする条例について、必要な HTML がすべて揃っているか確認してください

---

## 出力結果に「第○条」「第○項」が残っている

### どんな状況？

出力結果に、
「第○条」「第○項」などの抽象的な表現が残っています。

### どう考えればいい？

この状態は **正常な完了状態ではありません**。

質問の具体化処理が、
途中で止まっていることを示しています。

### どう対応すればいい？

- 入力データ（条例 HTML、質問セット CSV）を確認してください
- 実行時にエラーメッセージが出ていないか確認してください
- 必要に応じて、修正後に再実行してください

---

## Resolution Type が想定と異なる（user_input が含まれる）

### どんな状況？

すべて自動で解決されると思っていた質問の一部に、
`user_input` が含まれています。

### どう考えればいい？

解決方式に優劣はありません。

自動で一意に判断できない構造について、
無理に自動化せず、
ユーザーの判断を優先する設計になっています。

### どう対応すればいい？

- 結果が確定していれば、そのまま使用して問題ありません

---

## 本番環境で使用する場合の注意点

### どう考えればいい？

このツールは、
テスト環境と本番環境で
**同じディレクトリ構造**を前提としています。

異なるのは、配置場所（ドライブやパス）のみです。

### 注意点

- 本番環境では、DVD や USB メモリから条例 HTML を参照することがあります
- 実行時に指定するパスが、テスト環境と異なる場合があります

構造と命名規則が一致していれば、
ツールの動作自体が変わることはありません。

---

## このツールが行わないこと（責務の範囲）

このツールは、次のことは行いません。

- 回答文そのものを生成すること
- 条例の解釈が正しいかどうかを判断すること
- 回答の品質を評価すること

本ツールの役割は、
**質問を評価可能な状態に整えること**に限定されています。

その先の判断や評価は、
後続の工程や別の仕組みで行ってください。

---

## PowerShell や Python が使えない環境でも利用できますか？

### どんな状況？

- 職場の PC で PowerShell の実行が制限されている
- Python がインストールされていない、またはインストールできない
- セキュリティポリシー上、スクリプト実行に制限がある

### どう考えればいい？

本ツールは、内部処理に Python を使用しており、
実行用スクリプトとして PowerShell を利用する構成になっています。

そのため、**PowerShell と Python が利用できない環境では、そのまま実行することはできません。**

これは、ツールの機能制限というよりも、
処理の再現性と安全性を優先した設計によるものです。

### どう対応すればいい？

次のいずれかの方法を検討してください。

- PowerShell の実行が可能な環境で実行する  
  （別の端末や、検証用 PC など）
- Python が利用可能な環境で実行する  
  （事前に許可を得た検証環境など）
- PowerShell が使えない場合は、  
  `.bat` ファイルによる簡易実行方法を利用する  
  （.bat 版は簡易実行のため、入力チェックや案内は PowerShell 版より限定されます。）

いずれの場合も、
**条例データや質問セットを変更する必要はありません。**

---

## なぜこのような利用制限があるのですか？

### 理由は？

本ツールは、次の点を重視して設計されています。

- 条例 ID・条・項を必ず確定させること
- 推測や自動補完を行わないこと
- 実行結果を後から説明できること

これらを満たすため、
処理の流れを明示的に制御できる
PowerShell と Python を採用しています。

### 制限を回避する予定はありますか？

現時点では、
ブラウザのみで完結する仕組みや、
完全にインストール不要な形での提供は想定していません。

ただし、運用状況や要望に応じて、
配布形態や実行方法を見直す可能性はあります。

---

## この制限があっても使う価値はありますか？

はい。

本ツールは、
「誰でも手軽に実行できる」ことよりも、

- 結果がブレない
- 判断の根拠を説明できる
- 引き継ぎや再実行ができる

といった点を重視しています。

そのため、
評価・検証・記録を伴う業務において、
安定した結果を得たい場合に向いています。

## 出力ファイルが2つありますが、どちらを使えばいいですか？

用途によって使い分けてください。

- question_resolution_latest.json  
  直近の実行結果です。試行錯誤や確認用に使用します。

- question_resolution_result_YYYYMMDDTHHMMSSZ.json  
  実行ごとの履歴です。評価記録や保存・共有にはこちらを使用してください。

latest は実行のたびに上書きされるため、
正式な記録用途には履歴ファイルを使用してください。

## run フォルダの中のファイルを編集してもいいですか？

いいえ。run は実行専用です。配布物は編集せず、そのまま実行してください。動作しない場合は入力データ（条例HTML/CSV）や実行環境を確認してください。
