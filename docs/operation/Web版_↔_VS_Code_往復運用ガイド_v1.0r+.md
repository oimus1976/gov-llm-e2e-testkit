# Web版 ↔ VS Code 連携運用規程 v1.0r+

## 0. 本規程の位置づけ（最重要）

本規程は、
**Web版 ChatGPT と VS Code 拡張の振る舞いを制御するための運用規程**である。

* 人間向けの「使い方ガイド」ではない
* AIが推測・暴走・過剰補完をしないための**制御文書**である
* 本規程に反するプロンプト・運用は原則禁止とする

---

## 1. 目的

本規程は、Web版と VS Code 拡張を往復する開発・設計作業において、

* 判断の所在が曖昧になる
* 文脈が失われ再議論が発生する
* 作業ログが資産化されない

といった問題を防ぎ、
**意思決定を再現可能な一次情報として残すこと**を目的とする。

---

## 2. 基本原則（拘束力あり）

1. 推測で判断しない
2. 一次情報（コード・設計・diff）のみを根拠とする
3. AIは人格ではなく**役割**として扱う
4. チャットログは資産ではない
5. 資産化対象は「事実・判断・保留」のみとする

※ 上記原則に反する応答・運用は、/critic 対象とする。

---

## 3. 役割分担（固定・変更不可）

### 3.1 Web版 ChatGPT

**役割**：司会 / 設計整理 / 裁定者

**責務**

* 設計意図・前提条件の明文化
* 確定事項・禁止事項の言語化
* VS Code 作業結果の裁定
* PROJECT_STATUS / CHANGELOG 反映要否の判断

※ Web版は **実装判断を行わない**。

---

### 3.2 VS Code 拡張

**役割**：実装補佐 / レビュア / 書記

**責務**

* 開いているコードを一次情報として扱う
* 最小変更・設計非改変の確認
* Web版に返却する作業要約の作成
* 作業結果の Markdown 昇格支援

※ VS Code 拡張は **設計裁定を行わない**。

---

## 4. Web → VS Code 引き継ぎ（規定プロンプト）

### 4.1 実装ブリーフ（必須・改変禁止）

以下のプロンプトを **原則そのまま使用する**。
改変は禁止する。

**理由**：
本プロンプトは AI の推測・補完・判断逸脱を防ぐための
**制御インターフェース**であり、
曖昧化・簡略化は運用破綻を招くため。

```text
これから VS Code 拡張で実装・レビュー作業に入る。
VS Code 版にそのまま渡せる「実装ブリーフ」を作ってほしい。

前提：
- VS Code 版は短期記憶・コード文脈前提
- 推測は禁止、一次情報ベース
- 最小変更・設計非改変が最優先

以下の構成で出力して。

【VS CODE 実装ブリーフ】
1. 目的（1〜2行）
2. 確定事項（箇条書き）
3. 禁止事項（やってはいけない変更）
4. 未確定・判断保留点
5. VS Code 版への具体指示
- どのファイルを見るか
- 何をチェックするか
- 何を判断してよく、何を判断しないか
```

※ このブリーフ以外で VS Code 作業を開始してはならない。
- 加工しない
- 解釈を足さない
- そのまま VS Code に渡す

---

## 5. VS Code 作業と作業要約の資産化（必須）

### 5.1 作業原則

* 推測禁止
* コード上の事実のみ
* 最小変更を最優先

### 5.2 作業及び 作業要約の生成用プロンプト（必須）

```text
以下は Web版で作成された「VS CODE 実装ブリーフ」。
--- ここから ---
（Web版の出力をそのまま貼る）
--- ここまで ---

この前提で、今開いているコードに対して作業して。

作業内容：
- 設計逸脱・余計な変更・最小性の観点でレビュー／実装
- 推測は禁止。コード上の事実のみ

作業後、以下の条件を厳守して。保存用 Markdown に変換して。

条件：
- 推測・感想は禁止
- 実施した事実／判断理由／保留点のみ
- 箇条書き中心、簡潔
- Markdown はそのままファイル保存できる形

出力形式は以下に完全一致させて。

--- 出力ここから ---

---
date: YYYY-MM-DD
source: vscode-chat
context: <短い文脈名>
related:
  - <関連する設計/コードがあれば>
---

【VS CODE 作業要約】
1. 実施したこと（事実）
2. 観測された問題／なかった問題
3. 判断した点（理由つき）
4. 判断を保留した点
5. 次に Web版で裁定してほしい論点
```

※ 要約なき返却は禁止。

## 6. VS Code 作業要約の資産化（必須）

### 6.1 保存対象

* 保存するのは「VS CODE 作業要約」のみ
* チャット全文は禁止

### 6.2 保存場所

```text
docs/vscode_logs/YYYY-MM-DD_<context>.md
```
## 7 Web版での裁定（/critic）

### 7.1 /critic の定義

/critic は以下を対象とする。

* 事実誤認
* 推測混入
* 過剰修正
* 設計逸脱
* 判断根拠の不備

人格・態度・文体は対象外。

---

### 7.2 使用条件

* /critic は **Web版のみ**で使用する
* VS Code 拡張では使用禁止
* 裁定フェーズ専用とする

### 7.3 使用方法

VS Code から返ってきた「作業要約」を Web版に貼る。

```text
以下は VS Code 作業要約。
事実誤認・過剰修正・設計逸脱があれば /critic 観点で指摘して。
必要なら設計側を修正する。
この内容をもとに、裁定を行って。

やってほしいこと：
1. 事実として確定した点
2. 判断として採用／不採用する点
3. 公式ドキュメントに反映が必要かどうか
   - PROJECT_STATUS
   - CHANGELOG
   - 反映不要
を明確に分類して。

推測は禁止。要約内容のみを根拠に。
--- 作業要約 ---
（貼り付け）
```
---

### 7.4 裁定後チェックリスト（必須）

```
□ vscode_logs を保存した
□ git add した
□ git commit した
□ git push した
□ STATUS / CHANGELOG 反映要否を確認した
```

※ チェック未完了で次工程に進んではならない。

---

## 8. PROJECT_STATUS 反映ルール

### 反映対象

* フェーズ開始・完了
* 評価基準・前提条件の確定
* 設計方針の固定・撤回

---

## 9. CHANGELOG 反映ルール

### 反映対象

* 外部的意味を持つ変更
* テスト・仕様・運用規程の追加
* ドキュメント体系変更（本規程含む）

---

## 10. 適用範囲と例外（追加）

### 10.1 本規程の適用範囲

本規程は、以下に該当する作業に適用する。

* 設計判断を伴う実装
* pytest / CI / 評価基準に影響する変更
* 外部公開（OSS / 公共DX）を前提とした作業

---

### 10.2 適用除外（明示的例外）

以下は **本規程の適用外**とする。

* typo 修正のみ
* 試行的・一時的スクリプト
* 破棄前提の検証コード

※ 適用外とする判断は Web版で明示すること。

---

## 11. 逸脱時の扱い（追加）

* 本規程から逸脱した場合、
  **次回 Web版フェーズで逸脱を明示・是正する**
* 黙認・なかったこと扱いは禁止
* 逸脱を記録しない運用は禁止

---

## 12. 改訂ルール

* 本規程は **v1.0r+**
* 実運用で破綻が確認された場合のみ改訂
* 次回改訂は **v1.1** とする

---

## 13. 禁止事項（再掲）

* 規定外プロンプトでの往復
* 要約なしの Web ↔ VS Code 移動
* チャットログの正規保存
* 人格比較・「どっちが正しい？」型質問

---

